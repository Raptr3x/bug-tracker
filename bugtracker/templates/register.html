{% extends "layout_login.html" %}
{% block content %}
    <form class="login100-form validate-form" method="POST" action="">
        {{ form.hidden_tag() }}
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                <div class="alert alert-{{ category }}">
                    {{ message }}
                </div>
                {% endfor %}
            {% endif %}
        {% endwith %}
        <span class="login100-form-title p-b-33">
            {% if current_user.access=="admin" %}
                Register Admin Account
            {% else %}
                Register Account
            {% endif %}
        </span>

        <div class="wrap-input100 validate-input">
            {% if form.name.errors %}
                {{ form.name(class="input100", placeholder="Name") }}
                <div class="invalid-feedback">
                    {% for error in form.name.errors %}
                        <span>{{ error }}</span>
                    {% endfor %}
                </div>
            {% else %}
                {{ form.name(class="input100", placeholder="Name") }}
            {% endif %}
        </div>

        <div class="wrap-input100 validate-input" data-validate = "Valid email is required: ex@abc.xyz">
            {% if form.email.errors %}
                {{ form.email(class="input100", placeholder="Email") }}
                <div class="invalid-feedback">
                    {% for error in form.email.errors %}
                        <span>{{ error }}</span>
                    {% endfor %}
                </div>
            {% else %}
                {{ form.email(class="input100", placeholder="Email") }}
            {% endif %}
            <span class="focus-input100-1"></span>
            <span class="focus-input100-2"></span>
        </div>

        <div class="wrap-input100 rs1 validate-input" data-validate="Password is required">
            {% if form.password.errors %}
                {{ form.password(class="input100", placeholder="Password") }}
                <div class="invalid-feedback">
                    {% for error in form.password.errors %}
                        <span>{{ error }}</span>
                    {% endfor %}
                </div>
            {% else %}
                {{ form.password(class="input100", placeholder="Password") }}
            {% endif %}
            <span class="focus-input100-1"></span>
            <span class="focus-input100-2"></span>
        </div>

        <div class="wrap-input100 rs1 validate-input" data-validate="Password is required">
            {% if form.confirm_password.errors %}
                {{ form.confirm_password(class="input100", placeholder="Repeat password") }}
                <div class="invalid-feedback">
                    {% for error in form.confirm_password.errors %}
                        <span>{{ error }}</span>
                    {% endfor %}
                </div>
            {% else %}
                {{ form.confirm_password(class="input100", placeholder="Repeat password") }}
            {% endif %}
            <span class="focus-input100-1"></span>
            <span class="focus-input100-2"></span>
        </div>

        <div class="container-login100-form-btn m-t-20">
            {{ form.submit(class="login100-form-btn") }}
        </div>

        {% if current_user.access=="admin" %}
            <div class="text-center p-t-45 p-b-4">
                <span class="txt1">
                    Go back to 
                </span>

                <a href="{{url_for('home')}}" class="txt2 hov1">
                    home
                </a>
            </div>
            {% else %}
            <div class="text-center p-t-45 p-b-4">
                <span class="txt1">
                    Forgot
                </span>

                <a href="{{url_for('reset_request')}}" class="txt2 hov1">
                    Username / Password?
                </a>
            </div>

            <div class="text-center">
                <span class="txt1">
                    Already have an account?
                </span>

                <a href="{{url_for('login')}}" class="txt2 hov1">
                    Sign in
                </a>
            </div>
            
        {% endif %}
    </form>
{% endblock content %}
